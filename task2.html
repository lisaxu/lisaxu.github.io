<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>



<script>

// set the dimensions and margins of the graph
var margin = {top: 30, right: 30, bottom: 30, left: 30},
  width = 450 - margin.left - margin.right,
  height = 450 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

// Labels of row and columns
var myGroups = ['Karaoke', 'Seafood Markets', 'British', 'American (New)', 'Peruvian', 'Internet Cafes', 'Food Stands', 'Vietnamese', 'Dance Clubs', 'Argentine', 'Asian Fusion', 'African', 'Sports Bars', 'Burgers', 'Halal', 'Donuts', 'Szechuan', 'Dive Bars', 'Turkish', 'Venues & Event Spaces', 'Gastropubs', 'Indian', 'Moroccan', 'Polish', 'Champagne Bars', 'Southern', 'Lounges', 'Wineries', 'Tea Rooms', 'Bagels', 'Beer, Wine & Spirits', 'Persian-Iranian', 'Latin American', 'Tours', 'Wine Bars', 'Shopping', 'Portuguese', 'Meat Shops', 'Mexican', 'Hotels & Travel', 'Performing Arts', 'Venezuelan', 'Steakhouses', 'Afghan', 'Modern European', 'Convenience Stores', 'Golf', 'Grocery', 'Event Planning & Services', 'Country Dance Halls', 'Fish & Chips', 'Distilleries', 'Fast Food', 'Shaved Ice', 'Ethnic Food', 'Bars', 'Public Services & Government', 'Brasseries', 'Hot Dogs', 'Cinema', 'Caterers', 'French', 'Caribbean', 'Arts & Entertainment', 'Arabian', 'Thai', 'Butcher', 'Himalayan-Nepalese', 'Brazilian', 'Gluten-Free', 'Jazz & Blues', 'Adult Entertainment', 'Tex-Mex', 'Fruits & Veggies', 'Music Venues', 'Korean', 'Amusement Parks', 'Automotive', 'Tapas-Small Plates', 'Scandinavian', 'Outlet Stores', 'Laotian', 'Pizza', 'Buffets', 'Malaysian', 'Food Delivery Services', 'Desserts', 'Car Wash', 'Creperies', 'Basque', 'Health Markets', 'Pool Halls', 'Cultural Center', 'Specialty Food', 'Sushi Bars', 'Piano Bars', 'Arcades', 'Italian', 'Cheesesteaks', 'Chicken Wings', 'Bakeries', 'Hot Pot', 'Pubs', 'Shanghainese', 'Sandwiches', 'Irish', 'Juice Bars & Smoothies', 'Food Court', 'Barbeque', 'American (Traditional)', 'Live-Raw Food', 'Kosher', 'Mongolian', 'Hookah Bars', 'Soup', 'Chocolatiers & Shops', 'Indonesian', 'Personal Shopping', 'Tapas Bars', 'Cambodian', 'Gelato', 'Drugstores', 'Hotels', 'Fondue', 'Japanese', 'Cheese Shops', 'Soul Food', 'Mediterranean', 'Pakistani', 'Casinos', 'Vegetarian', 'Breakfast & Brunch', 'Breweries', 'Hawaiian', 'Shopping Centers', 'Filipino', 'Salvadoran', 'Vegan', 'Active Life', 'Ukrainian', 'Landmarks & Historical Buildings', 'Do-It-Yourself Food', 'Coffee & Tea', 'Chinese', 'Swimming Pools', 'Cajun-Creole', 'Greek', 'Ramen', 'Bowling', 'Spanish', 'Cafes', 'Cuban', 'Seafood', 'Belgian', 'Salad', 'Russian', 'Lebanese', 'German', 'Comfort Food', 'Cantonese', 'Bubble Tea', 'Singaporean', 'Cocktail Bars', 'Nightlife', 'Ice Cream & Frozen Yogurt', 'Bistros', 'Local Flavor', 'RV Parks', 'Canadian (New)', 'Diners', 'Delis', 'Party & Event Planning', 'Festivals', 'Food', 'Street Vendors', 'Ethiopian', 'Food Trucks', 'Cafeteria', 'Dim Sum', 'Scottish', 'Middle Eastern', 'Pretzels', 'Taiwanese']
var myVars = ['Karaoke', 'Seafood Markets', 'British', 'American (New)', 'Peruvian', 'Internet Cafes', 'Food Stands', 'Vietnamese', 'Dance Clubs', 'Argentine', 'Asian Fusion', 'African', 'Sports Bars', 'Burgers', 'Halal', 'Donuts', 'Szechuan', 'Dive Bars', 'Turkish', 'Venues & Event Spaces', 'Gastropubs', 'Indian', 'Moroccan', 'Polish', 'Champagne Bars', 'Southern', 'Lounges', 'Wineries', 'Tea Rooms', 'Bagels', 'Beer, Wine & Spirits', 'Persian-Iranian', 'Latin American', 'Tours', 'Wine Bars', 'Shopping', 'Portuguese', 'Meat Shops', 'Mexican', 'Hotels & Travel', 'Performing Arts', 'Venezuelan', 'Steakhouses', 'Afghan', 'Modern European', 'Convenience Stores', 'Golf', 'Grocery', 'Event Planning & Services', 'Country Dance Halls', 'Fish & Chips', 'Distilleries', 'Fast Food', 'Shaved Ice', 'Ethnic Food', 'Bars', 'Public Services & Government', 'Brasseries', 'Hot Dogs', 'Cinema', 'Caterers', 'French', 'Caribbean', 'Arts & Entertainment', 'Arabian', 'Thai', 'Butcher', 'Himalayan-Nepalese', 'Brazilian', 'Gluten-Free', 'Jazz & Blues', 'Adult Entertainment', 'Tex-Mex', 'Fruits & Veggies', 'Music Venues', 'Korean', 'Amusement Parks', 'Automotive', 'Tapas-Small Plates', 'Scandinavian', 'Outlet Stores', 'Laotian', 'Pizza', 'Buffets', 'Malaysian', 'Food Delivery Services', 'Desserts', 'Car Wash', 'Creperies', 'Basque', 'Health Markets', 'Pool Halls', 'Cultural Center', 'Specialty Food', 'Sushi Bars', 'Piano Bars', 'Arcades', 'Italian', 'Cheesesteaks', 'Chicken Wings', 'Bakeries', 'Hot Pot', 'Pubs', 'Shanghainese', 'Sandwiches', 'Irish', 'Juice Bars & Smoothies', 'Food Court', 'Barbeque', 'American (Traditional)', 'Live-Raw Food', 'Kosher', 'Mongolian', 'Hookah Bars', 'Soup', 'Chocolatiers & Shops', 'Indonesian', 'Personal Shopping', 'Tapas Bars', 'Cambodian', 'Gelato', 'Drugstores', 'Hotels', 'Fondue', 'Japanese', 'Cheese Shops', 'Soul Food', 'Mediterranean', 'Pakistani', 'Casinos', 'Vegetarian', 'Breakfast & Brunch', 'Breweries', 'Hawaiian', 'Shopping Centers', 'Filipino', 'Salvadoran', 'Vegan', 'Active Life', 'Ukrainian', 'Landmarks & Historical Buildings', 'Do-It-Yourself Food', 'Coffee & Tea', 'Chinese', 'Swimming Pools', 'Cajun-Creole', 'Greek', 'Ramen', 'Bowling', 'Spanish', 'Cafes', 'Cuban', 'Seafood', 'Belgian', 'Salad', 'Russian', 'Lebanese', 'German', 'Comfort Food', 'Cantonese', 'Bubble Tea', 'Singaporean', 'Cocktail Bars', 'Nightlife', 'Ice Cream & Frozen Yogurt', 'Bistros', 'Local Flavor', 'RV Parks', 'Canadian (New)', 'Diners', 'Delis', 'Party & Event Planning', 'Festivals', 'Food', 'Street Vendors', 'Ethiopian', 'Food Trucks', 'Cafeteria', 'Dim Sum', 'Scottish', 'Middle Eastern', 'Pretzels', 'Taiwanese']

// Build X scales and axis:
var x = d3.scaleBand()
  .range([ 0, width ])
  .domain(myGroups)
  .padding(0.01);
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x))

// Build X scales and axis:
var y = d3.scaleBand()
  .range([ height, 0 ])
  .domain(myVars)
  .padding(0.01);
svg.append("g")
  .call(d3.axisLeft(y));

// Build color scale
var myColor = d3.scaleLinear()
  .range(["white", "#69b3a2"])
  .domain([1,100])

//Read the data
d3.csv("sim_matrix.csv", function(data) {

  svg.selectAll()
      .data(data, function(d) {return d.group+':'+d.variable;})
      .enter()
      .append("rect")
      .attr("x", function(d) { return x(d.group) })
      .attr("y", function(d) { return y(d.variable) })
      .attr("width", x.bandwidth() )
      .attr("height", y.bandwidth() )
      .style("fill", function(d) { return myColor(d.value)} )

})

</script>
